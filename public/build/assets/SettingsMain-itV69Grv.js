import{r as s,R as b,j as e}from"./App-lJcLEQj3.js";import{b as M,T as I,c as z,u as Z}from"./useAxios-9_qVDjtr.js";import{U as w,S as A,T as v,B as F}from"./TextField-DfkA9q-F.js";import{L as D}from"./Layout-0QYUEL9W.js";import{C as H,F as K}from"./FormLayout-L2FP_CBw.js";import{B as V,T as W}from"./Toast-Nkl0pAhm.js";function q({acceptCharset:n,action:l,autoComplete:i,children:x,encType:c,implicitSubmit:d=!0,method:h="post",name:f,noValidate:k,preventDefault:o=!0,target:p,onSubmit:r}){const u=M(),g=s.useCallback(j=>{o&&(j.preventDefault(),r(j))},[r,o]),C=G(i),y=d?b.createElement(I,{as:"span",visuallyHidden:!0},b.createElement("button",{type:"submit","aria-hidden":"true",tabIndex:-1},u.translate("Polaris.Common.submit"))):null;return b.createElement("form",{acceptCharset:n,action:l,autoComplete:C,encType:c,method:h,name:f,noValidate:k,target:p,onSubmit:g},y,x)}function G(n){return n==null?n:n?"on":"off"}var S={Link:"Polaris-Link",monochrome:"Polaris-Link--monochrome",removeUnderline:"Polaris-Link--removeUnderline"};function J({url:n,children:l,onClick:i,external:x,target:c,id:d,monochrome:h,removeUnderline:f,accessibilityLabel:k,dataPrimaryLink:o}){return b.createElement(V.Consumer,null,p=>{const r=h||p,u=z(S.Link,r&&S.monochrome,f&&S.removeUnderline);return n?b.createElement(w,{onClick:i,className:u,url:n,external:x,target:c,id:d,"aria-label":k,"data-primary-link":o},l):b.createElement("button",{type:"button",onClick:i,className:u,id:d,"aria-label":k,"data-primary-link":o},l)})}const te=()=>{const{axios:n}=Z(),[l,i]=s.useState(!0),[x,c]=s.useState(!1),[d,h]=s.useState(""),[f,k]=s.useState(""),[o,p]=s.useState(""),[r,u]=s.useState(""),[g,C]=s.useState(""),[y,j]=s.useState(""),[N,R]=s.useState(""),[m,T]=s.useState(!1),B=s.useCallback(()=>{T(!1),c(!0),n.post("/update-settings",{platform:f,token_1:o,token_2:r,phone_number:g}).then(t=>{console.log(t.data),c(!1),h("Token Updated Successfully")}).catch(t=>{c(!1)})},[o,r,g]),P=s.useCallback(()=>{T(!0)},[]),E=s.useCallback(t=>{p(t);const a=_(t);j(a)},[]),L=s.useCallback(t=>{u(t);const a=_(t);R(a)},[]),_=t=>{const U=t.length>6?t.length-6:0;return t.substring(0,3)+"*".repeat(U)+t.slice(-3)};return s.useEffect(()=>{n.get("/get-settings").then(t=>{console.log(t.data);const a=t.data.deliveryCredential;p(a.token_1),u(a.token_2),C(a.phone_number),E(a.token_1),L(a.token_2),i(!1)}).catch(t=>{i(!1)})},[]),e.jsxs(e.Fragment,{children:[l&&e.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center"},children:e.jsx(A,{accessibilityLabel:"Spinner example",size:"large"})}),e.jsx("div",{hidden:l,children:e.jsx(D,{children:e.jsxs(D.Section,{children:[e.jsx("div",{style:{marginLeft:15},children:e.jsx(I,{variant:"headingLg",as:"p",children:"ZR Express"})}),e.jsx(H,{sectioned:!0,children:e.jsx(q,{onSubmit:B,children:e.jsxs(K,{children:[e.jsxs("div",{style:{display:"flex",flexDirection:"row",gap:10},children:[e.jsx("p",{children:"To find these Credentials, go to"}),e.jsx(J,{url:"https://zrexpress.com/ZR_WEB/FR/Developpement.awp",target:"_blank",children:"ZR Express Dev Dashboard"})]}),e.jsx(v,{label:"Token",value:m?o:y,onChange:E,disabled:!m,autoComplete:"off"}),e.jsx(v,{label:"Key",value:m?r:N,onChange:L,disabled:!m,autoComplete:"off"}),e.jsx(v,{label:"Phone Number",value:g,onChange:t=>C(t),disabled:!m,autoComplete:"off"}),e.jsxs(e.Fragment,{children:[e.jsx(F,{submit:!0,variant:"primary",tone:"critical",disabled:!m,loading:x,children:"Save"}),e.jsx(F,{onClick:P,disabled:m,children:"Edit"})]})]})})})]})})}),d&&e.jsx(W,{content:d,onDismiss:()=>{h("")}})]})};export{te as default};
