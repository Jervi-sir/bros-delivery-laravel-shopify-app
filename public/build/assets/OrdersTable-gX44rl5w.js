import{r as S,a as ne,c as M,v as be,R as a,h as te,b as Ce,I as pe,d as le,e as ye,f as Se,g as ve,i as xe,P as Te,E as ie,k as Ee,l as _e,m as ke,n as Pe,o as De,T as se,j as d,M as re,p as Fe,B as Y,S as Re,F as He,q as Ie,L as je,u as Ne}from"./index-RABUB5AY.js";import{a as Le,u as we}from"./useAxios-0bCRz5Bo.js";import{S as Ae,a as Me,A as Oe,b as Ve,I as H}from"./IndexTable-NRimpbQ3.js";import{T as We}from"./Toast-6Umqpg9O.js";import{C as $e}from"./Card-wUD3hrfQ.js";let q;(function(s){s.All="all",s.Page="page",s.Multi="multi",s.Single="single",s.Range="range"})(q||(q={}));function oe(s){if("id"in s)return s.id;throw new Error("Your resource does not directly contain an `id`. Pass a `resourceIDResolver` to `useIndexResourceState`")}function Be(s,{selectedResources:i=[],allResourcesSelected:t=!1,resourceIDResolver:e=oe,resourceFilter:l=void 0}={selectedResources:[],allResourcesSelected:!1,resourceIDResolver:oe,resourceFilter:void 0}){const[n,o]=S.useState(i),[c,r]=S.useState(t),u=S.useCallback((p,h,C,v)=>{switch(p===q.All?r(h):c&&r(!1),p){case q.Single:o(y=>h?[...y,C]:y.filter(x=>x!==C));break;case q.All:case q.Page:if(l){const y=s.filter(l);o(h&&n.length<y.length?y.map(e):[])}else o(h?s.map(e):[]);break;case q.Multi:if(!C)break;o(y=>{const x=[],F=l?s.filter(l):s;for(let P=C[0];P<=C[1];P++)if(F.includes(s[P])){const E=e(s[P]);(h&&!y.includes(E)||!h&&y.includes(E))&&x.push(E)}return h?[...y,...x]:y.filter(P=>!x.includes(P))});break;case q.Range:if(!C)break;o(y=>{const P=(l?s.filter(l):s).map(e).slice(Number(C[0]),Number(C[1])+1),E=P.some(k=>n.includes(k));return!P.every(k=>n.includes(k))&&(h||E)?[...new Set([...y,...P]).values()]:y.filter(k=>!P.includes(k))});break}},[c,l,n,s,e]),m=S.useCallback(()=>{o([]),r(!1)},[]),f=S.useCallback(p=>{const C=[...n].filter(v=>!p.includes(v));o(C),C.length===0&&r(!1)},[n]);return{selectedResources:n,allResourcesSelected:c,handleSelectionChange:u,clearSelection:m,removeSelectedResources:f}}function qe(s){return function(i,t){const{firstVisibleColumnIndex:e,tableLeftVisibleEdge:l,tableRightVisibleEdge:n}=s,o=i.offsetLeft,c=o+i.offsetWidth,r=ce(o,l,n,"left"),u=ce(c,l,n,"right"),m=r||u,f=i.offsetWidth;return m&&(s.firstVisibleColumnIndex=Math.min(e,t)),{leftEdge:o,rightEdge:c,isVisible:m,width:f,index:t}}}function ce(s,i,t,e){return s>=i+(e==="left"?0:30)&&s<=t-30}function ze(s,i){const{firstVisibleColumnIndex:t}=s,e=Math.max(t-1,0),l=i[e],n=i[t];return{previousColumn:l,currentColumn:n}}var g={DataTable:"Polaris-DataTable",condensed:"Polaris-DataTable--condensed",Navigation:"Polaris-DataTable__Navigation",Pip:"Polaris-DataTable__Pip","Pip-visible":"Polaris-DataTable__Pip--visible",ScrollContainer:"Polaris-DataTable__ScrollContainer",Table:"Polaris-DataTable__Table",TableRow:"Polaris-DataTable__TableRow",Cell:"Polaris-DataTable__Cell",IncreasedTableDensity:"Polaris-DataTable__IncreasedTableDensity",ZebraStripingOnData:"Polaris-DataTable__ZebraStripingOnData",RowCountIsEven:"Polaris-DataTable__RowCountIsEven",ShowTotalsInFooter:"Polaris-DataTable__ShowTotalsInFooter","Cell-separate":"Polaris-DataTable__Cell--separate","Cell-firstColumn":"Polaris-DataTable__Cell--firstColumn","Cell-numeric":"Polaris-DataTable__Cell--numeric","Cell-truncated":"Polaris-DataTable__Cell--truncated","Cell-header":"Polaris-DataTable__Cell--header","Cell-sortable":"Polaris-DataTable__Cell--sortable","Heading-left":"Polaris-DataTable__Heading--left","Cell-verticalAlignTop":"Polaris-DataTable__Cell--verticalAlignTop","Cell-verticalAlignBottom":"Polaris-DataTable__Cell--verticalAlignBottom","Cell-verticalAlignMiddle":"Polaris-DataTable__Cell--verticalAlignMiddle","Cell-verticalAlignBaseline":"Polaris-DataTable__Cell--verticalAlignBaseline",hoverable:"Polaris-DataTable--hoverable","Cell-hovered":"Polaris-DataTable__Cell--hovered",Icon:"Polaris-DataTable__Icon",Heading:"Polaris-DataTable__Heading",StickyHeaderEnabled:"Polaris-DataTable__StickyHeaderEnabled",StickyHeaderWrapper:"Polaris-DataTable__StickyHeaderWrapper","Cell-sorted":"Polaris-DataTable__Cell--sorted","Cell-total":"Polaris-DataTable__Cell--total",ShowTotals:"Polaris-DataTable__ShowTotals","Cell-total-footer":"Polaris-DataTable--cellTotalFooter",Footer:"Polaris-DataTable__Footer",StickyHeaderInner:"Polaris-DataTable__StickyHeaderInner","StickyHeaderInner-isSticky":"Polaris-DataTable__StickyHeaderInner--isSticky",StickyHeaderTable:"Polaris-DataTable__StickyHeaderTable",FixedFirstColumn:"Polaris-DataTable__FixedFirstColumn",StickyTableHeadingsRow:"Polaris-DataTable__StickyTableHeadingsRow",TooltipContent:"Polaris-DataTable__TooltipContent"};function X({content:s,contentType:i,nthColumn:t,firstColumn:e,truncate:l,header:n,total:o,totalInFooter:c,sorted:r,sortable:u,sortDirection:m,inFixedNthColumn:f,verticalAlign:p="top",defaultSortDirection:h="ascending",onSort:C,colSpan:v,setRef:y=()=>{},stickyHeadingCell:x=!1,stickyCellWidth:F,hovered:P=!1,handleFocus:E=()=>{},hasFixedNthColumn:j=!1,fixedCellVisible:L=!1,firstColumnMinWidth:_,style:k,lastFixedFirstColumn:I}){const N=ne(),R=i==="numeric",b=M(g.Cell,g[`Cell-${be("verticalAlign",p)}`],e&&g["Cell-firstColumn"],l&&g["Cell-truncated"],n&&g["Cell-header"],o&&g["Cell-total"],c&&g["Cell-total-footer"],R&&g["Cell-numeric"],u&&g["Cell-sortable"],r&&g["Cell-sorted"],x&&g.StickyHeaderCell,P&&g["Cell-hovered"],I&&f&&L&&g["Cell-separate"],t&&f&&x&&g.FixedFirstColumn),V=M(n&&g.Heading,n&&i==="text"&&g["Heading-left"]),W=M(u&&g.Icon),B=r&&m?m:h,z=B==="descending"?Ae:Me,U=m==="ascending"?"descending":"ascending",w=N.translate("Polaris.DataTable.sortAccessibilityLabel",{direction:r?U:B}),Z=a.createElement("span",{className:W},a.createElement(pe,{source:z,accessibilityLabel:w})),K=!(x&&j&&t&&!f),A=u?a.createElement("button",{className:V,onClick:C,onFocus:E,tabIndex:K?0:-1},Z,s):s,$=v&&v>1?{colSpan:v}:{},T=t&&_?{minWidth:_}:{minWidth:F},D=a.createElement("th",Object.assign({ref:y},te.props,$,{className:b,"aria-sort":m,style:{...k,...T},"data-index-table-sticky-heading":!0}),A),Q=n?a.createElement("th",Object.assign({},te.props,{"aria-sort":m},$,{ref:y,className:b,scope:"col",style:{...T}}),A):a.createElement("th",Object.assign({},$,{ref:y,className:b,scope:"row",style:{...T}}),l?a.createElement(Ue,{className:g.TooltipContent},s):s),J=n||e||t?Q:a.createElement("td",Object.assign({className:b},$),s);return x?D:J}const Ue=({children:s,className:i=""})=>{const t=S.useRef(null),{current:e}=t,l=a.createElement("span",{ref:t,className:i},s);return(e==null?void 0:e.scrollWidth)>(e==null?void 0:e.offsetWidth)?a.createElement(Ce,{content:t.current.innerText},l):l};function Ze({columnVisibilityData:s,isScrolledFarthestLeft:i,isScrolledFarthestRight:t,navigateTableLeft:e,navigateTableRight:l,fixedFirstColumns:n,setRef:o=()=>{}}){const c=ne(),r=s.map((f,p)=>{if(p<n)return;const h=M(g.Pip,f.isVisible&&g["Pip-visible"]);return a.createElement("div",{className:h,key:`pip-${p}`})}),u=c.translate("Polaris.DataTable.navAccessibilityLabel",{direction:"left"}),m=c.translate("Polaris.DataTable.navAccessibilityLabel",{direction:"right"});return a.createElement("div",{className:g.Navigation,ref:o},a.createElement(le,{variant:"tertiary",icon:ye,disabled:i,accessibilityLabel:u,onClick:e}),r,a.createElement(le,{variant:"tertiary",icon:Se,disabled:t,accessibilityLabel:m,onClick:l}))}const de=s=>{const i=[];return s&&s.forEach(t=>{i.push(t.clientHeight)}),i};class Ye extends S.PureComponent{constructor(...i){super(...i),this.state={condensed:!1,columnVisibilityData:[],isScrolledFarthestLeft:!0,isScrolledFarthestRight:!1,rowHovered:void 0},this.dataTable=S.createRef(),this.scrollContainer=S.createRef(),this.table=S.createRef(),this.stickyTable=S.createRef(),this.stickyNav=null,this.headerNav=null,this.tableHeadings=[],this.stickyHeadings=[],this.tableHeadingWidths=[],this.stickyHeaderActive=!1,this.scrollStopTimer=null,this.handleResize=ve(()=>{const{table:{current:t},scrollContainer:{current:e}}=this;let l=!1;t&&e&&(l=t.scrollWidth>e.clientWidth+1),this.setState({condensed:l,...this.calculateColumnVisibilityData(l)})}),this.setCellRef=({ref:t,index:e,inStickyHeader:l})=>{if(t!=null)if(l){this.stickyHeadings[e]=t;const n=t.querySelector("button");if(n==null)return;n.addEventListener("focus",this.handleHeaderButtonFocus)}else this.tableHeadings[e]=t,this.tableHeadingWidths[e]=t.clientWidth},this.changeHeadingFocus=()=>{const{tableHeadings:t,stickyHeadings:e,stickyNav:l,headerNav:n}=this,o=e.findIndex(h=>{var C;return h===((C=document.activeElement)==null?void 0:C.parentElement)}),c=t.findIndex(h=>{var C;return h===((C=document.activeElement)==null?void 0:C.parentElement)}),r=l==null?void 0:l.querySelectorAll("button"),u=n==null?void 0:n.querySelectorAll("button");let m=-1;r==null||r.forEach((h,C)=>{h===document.activeElement&&(m=C)});let f=-1;if(u==null||u.forEach((h,C)=>{h===document.activeElement&&(f=C)}),o<0&&c<0&&m<0&&f<0)return null;let p;if(o>=0?p=t[o].querySelector("button"):c>=0&&(p=e[c].querySelector("button")),m>=0?p=u==null?void 0:u[m]:f>=0&&(p=r==null?void 0:r[f]),p==null)return null;p.style.visibility="visible",p.focus(),p.style.removeProperty("visibility")},this.calculateColumnVisibilityData=t=>{const e=this.fixedFirstColumns(),{table:{current:l},scrollContainer:{current:n},dataTable:{current:o}}=this,{stickyHeader:c}=this.props;if((c||t)&&l&&n&&o){const r=l.querySelectorAll(te.selector),u=r[e-1],m=e?u.offsetLeft+u.offsetWidth:0;if(r.length>0){const f=r.length-1,p=n.scrollLeft+m,h=n.scrollLeft+o.offsetWidth,C={firstVisibleColumnIndex:f,tableLeftVisibleEdge:p,tableRightVisibleEdge:h},v=[...r].map(qe(C)),y=v[v.length-1],x=e?p===m:p===0;return{columnVisibilityData:v,...ze(C,v),isScrolledFarthestLeft:x,isScrolledFarthestRight:y.rightEdge<=h}}}return{columnVisibilityData:[],previousColumn:void 0,currentColumn:void 0}},this.handleHeaderButtonFocus=t=>{var p;const e=this.fixedFirstColumns();if(this.scrollContainer.current==null||t.target==null||this.state.columnVisibilityData.length===0)return;const n=t.target.parentNode,o=this.scrollContainer.current.scrollLeft,c=this.scrollContainer.current.offsetWidth,r=o+c,u=this.state.columnVisibilityData.length>0?(p=this.state.columnVisibilityData[e])==null?void 0:p.rightEdge:0,m=n.offsetLeft,f=n.offsetLeft+n.offsetWidth;o>m-u&&(this.scrollContainer.current.scrollLeft=m-u),f>r&&(this.scrollContainer.current.scrollLeft=f-c)},this.stickyHeaderScrolling=()=>{const{current:t}=this.stickyTable,{current:e}=this.scrollContainer;t==null||e==null||(t.scrollLeft=e.scrollLeft)},this.scrollListener=()=>{var t;this.scrollStopTimer&&clearTimeout(this.scrollStopTimer),this.scrollStopTimer=setTimeout(()=>{this.setState(e=>({...this.calculateColumnVisibilityData(e.condensed)}))},100),this.setState({isScrolledFarthestLeft:((t=this.scrollContainer.current)==null?void 0:t.scrollLeft)===0}),this.props.stickyHeader&&this.stickyHeaderActive&&this.stickyHeaderScrolling()},this.handleHover=t=>()=>{this.setState({rowHovered:t})},this.handleFocus=t=>{var u;const e=this.fixedFirstColumns();if(this.scrollContainer.current==null||t.target==null)return;const l=t.target.parentNode,o=this.props?(u=this.state.columnVisibilityData[e])==null?void 0:u.rightEdge:0,r=l.offsetLeft-o;this.scrollContainer.current.scrollLeft>r&&(this.scrollContainer.current.scrollLeft=r)},this.navigateTable=t=>{var m;const e=this.fixedFirstColumns(),{currentColumn:l,previousColumn:n}=this.state,o=(m=this.state.columnVisibilityData[e-1])==null?void 0:m.rightEdge;if(!l||!n)return;let c=0;for(let f=0;f<l.index;f++)c+=this.state.columnVisibilityData[f].width;const{current:r}=this.scrollContainer;return()=>{let f=0;e?f=t==="right"?c-o+l.width:c-n.width-o:f=t==="right"?l.rightEdge:n.leftEdge,r&&(r.scrollLeft=f,requestAnimationFrame(()=>{this.setState(p=>({...this.calculateColumnVisibilityData(p.condensed)}))}))}},this.renderHeading=({heading:t,headingIndex:e,inFixedNthColumn:l,inStickyHeader:n})=>{var k;const{sortable:o,truncate:c=!1,columnContentTypes:r,defaultSortDirection:u,initialSortColumnIndex:m=0,verticalAlign:f,firstColumnMinWidth:p}=this.props,h=this.fixedFirstColumns(),{sortDirection:C=u,sortedColumnIndex:v=m,isScrolledFarthestLeft:y}=this.state;let x;const F=`heading-cell-${e}`,P=`stickyheader-${e}`,E=n?P:F;if(o){const I=o[e],N=I&&v===e;x={defaultSortDirection:u,sorted:N,sortable:I,sortDirection:N?C:"none",onSort:this.defaultOnSort(e),fixedNthColumn:h,inFixedNthColumn:h}}const j=n?this.tableHeadingWidths[e]:void 0,L=!y,_={header:!0,stickyHeadingCell:n,content:t,contentType:r[e],nthColumn:e<h,fixedFirstColumns:h,truncate:c,headingIndex:e,...x,verticalAlign:f,handleFocus:this.handleFocus,stickyCellWidth:j,fixedCellVisible:L,firstColumnMinWidth:p};return l&&n?[a.createElement(X,Object.assign({key:E},_,{setRef:I=>{this.setCellRef({ref:I,index:e,inStickyHeader:n})},inFixedNthColumn:!1})),a.createElement(X,Object.assign({key:`${E}-sticky`},_,{setRef:I=>{this.setCellRef({ref:I,index:e,inStickyHeader:n})},inFixedNthColumn:!!h,lastFixedFirstColumn:e===h-1,style:{left:(k=this.state.columnVisibilityData[e])==null?void 0:k.leftEdge}}))]:a.createElement(X,Object.assign({key:E},_,{setRef:I=>{this.setCellRef({ref:I,index:e,inStickyHeader:n})},lastFixedFirstColumn:e===h-1,inFixedNthColumn:l}))},this.totalsRowHeading=()=>{const{i18n:t,totals:e,totalsName:l}=this.props,n=l||{singular:t.translate("Polaris.DataTable.totalRowHeading"),plural:t.translate("Polaris.DataTable.totalsRowHeading")};return e&&e.filter(o=>o!=="").length>1?n.plural:n.singular},this.renderTotals=({total:t,index:e})=>{const l=this.fixedFirstColumns(),n=`totals-cell-${e}`,{truncate:o=!1,verticalAlign:c,columnContentTypes:r}=this.props;let u,m;e===0&&(u=this.totalsRowHeading()),t!==""&&e>0&&(m=r[e],u=t);const f=this.props.showTotalsInFooter;return a.createElement(X,{total:!0,totalInFooter:f,nthColumn:e<=l-1,firstColumn:e===0,key:n,content:u,contentType:m,truncate:o,verticalAlign:c})},this.getColSpan=(t,e,l,n)=>{if(this.fixedFirstColumns())return 1;const c=t||1,r=e||l,u=Math.floor(r/c),m=r%c;return n===0?u+m:u},this.defaultRenderRow=({row:t,index:e,inFixedNthColumn:l,rowHeights:n})=>{const{columnContentTypes:o,truncate:c=!1,verticalAlign:r,hoverable:u=!0,headings:m}=this.props,{condensed:f}=this.state,p=this.fixedFirstColumns(),h=M(g.TableRow,u&&g.hoverable);return a.createElement("tr",{key:`row-${e}`,className:h,onMouseEnter:this.handleHover(e),onMouseLeave:this.handleHover()},t.map((C,v)=>{const y=e===this.state.rowHovered,x=`cell-${v}-row-${e}`,F=this.getColSpan(t.length,m.length,o.length,v);return a.createElement(X,{key:x,content:C,contentType:o[v],nthColumn:v<=p-1,firstColumn:v===0,truncate:c,verticalAlign:r,colSpan:F,hovered:y,style:n?{height:`${n[e]}px`}:{},inFixedNthColumn:f&&l})}))},this.defaultOnSort=t=>{const{onSort:e,defaultSortDirection:l="ascending",initialSortColumnIndex:n}=this.props,{sortDirection:o=l,sortedColumnIndex:c=n}=this.state;let r=l;return c===t&&(r=o==="ascending"?"descending":"ascending"),()=>{this.setState({sortDirection:r,sortedColumnIndex:t},()=>{e&&e(t,r)})}}}componentDidMount(){this.handleResize()}componentDidUpdate(i){xe(i,this.props)||this.handleResize()}componentWillUnmount(){this.handleResize.cancel()}render(){var G,A,$;const{headings:i,totals:t,showTotalsInFooter:e,rows:l,footerContent:n,hideScrollIndicator:o=!1,increasedTableDensity:c=!1,hasZebraStripingOnData:r=!1,stickyHeader:u=!1,hasFixedFirstColumn:m=!1,pagination:f}=this.props,{condensed:p,columnVisibilityData:h,isScrolledFarthestLeft:C,isScrolledFarthestRight:v}=this.state,y=this.fixedFirstColumns(),x=l.length%2===0,F=M(g.DataTable,p&&g.condensed,t&&g.ShowTotals,e&&g.ShowTotalsInFooter,r&&g.ZebraStripingOnData,r&&x&&g.RowCountIsEven),P=M(g.TableWrapper,p&&g.condensed,c&&g.IncreasedTableDensity,u&&g.StickyHeaderEnabled),E=a.createElement("tr",null,i.map((T,D)=>this.renderHeading({heading:T,headingIndex:D,inFixedNthColumn:!1,inStickyHeader:!1}))),j=t?a.createElement("tr",null,t.map((T,D)=>this.renderTotals({total:T,index:D}))):null,L=l.map(T=>T.slice(0,y)),_=i.slice(0,y),k=t==null?void 0:t.slice(0,y),I=(G=this.table.current)==null?void 0:G.children[0].childNodes,N=(A=this.table.current)==null?void 0:A.children[1].childNodes,R=de(I),b=de(N),V=p&&y!==0&&a.createElement("table",{className:M(g.FixedFirstColumn,!C&&g.separate),style:{width:`${($=h[y-1])==null?void 0:$.rightEdge}px`}},a.createElement("thead",null,a.createElement("tr",{style:{height:`${R[0]}px`}},_.map((T,D)=>this.renderHeading({heading:T,headingIndex:D,inFixedNthColumn:!0,inStickyHeader:!1}))),t&&!e&&a.createElement("tr",{style:{height:`${R[1]}px`}},k==null?void 0:k.map((T,D)=>this.renderTotals({total:T,index:D})))),a.createElement("tbody",null,L.map((T,D)=>this.defaultRenderRow({row:T,index:D,inFixedNthColumn:!0,rowHeights:b}))),t&&e&&a.createElement("tfoot",null,a.createElement("tr",null,k==null?void 0:k.map((T,D)=>this.renderTotals({total:T,index:D}))))),W=l.map((T,D)=>this.defaultRenderRow({row:T,index:D,inFixedNthColumn:!1})),B=n?a.createElement("div",{className:g.Footer},n):null,z=f?a.createElement(Te,Object.assign({type:"table"},f)):null,U=e?null:j,w=e?a.createElement("tfoot",null,j):null,Z=T=>o?null:a.createElement(Ze,{columnVisibilityData:h,isScrolledFarthestLeft:C,isScrolledFarthestRight:v,navigateTableLeft:this.navigateTable("left"),navigateTableRight:this.navigateTable("right"),fixedFirstColumns:y,setRef:D=>{T==="header"?this.headerNav=D:T==="sticky"&&(this.stickyNav=D)}}),K=u?a.createElement(Oe,null,a.createElement("div",{className:g.StickyHeaderWrapper,role:"presentation"},a.createElement(Ve,{boundingElement:this.dataTable.current,onStickyChange:T=>{this.changeHeadingFocus(),this.stickyHeaderActive=T}},T=>{const D=M(g.StickyHeaderInner,T&&g["StickyHeaderInner-isSticky"]),Q=M(g.StickyHeaderTable,!C&&g.separate);return a.createElement("div",{className:D},a.createElement("div",null,Z("sticky")),a.createElement("table",{className:Q,ref:this.stickyTable},a.createElement("thead",null,a.createElement("tr",{className:g.StickyTableHeadingsRow},i.map((J,ee)=>this.renderHeading({heading:J,headingIndex:ee,inFixedNthColumn:!!(ee<=y-1&&y),inStickyHeader:!0}))))))}))):null;return a.createElement("div",{className:P,ref:this.dataTable},K,Z("header"),a.createElement("div",{className:F},a.createElement("div",{className:g.ScrollContainer,ref:this.scrollContainer},a.createElement(ie,{event:"resize",handler:this.handleResize}),a.createElement(ie,{capture:!0,passive:!0,event:"scroll",handler:this.scrollListener}),V,a.createElement("table",{className:g.Table,ref:this.table},a.createElement("thead",null,E,U),a.createElement("tbody",null,W),w)),z,B))}fixedFirstColumns(){const{hasFixedFirstColumn:i,fixedFirstColumns:t=0,headings:e}=this.props,l=i&&!t?1:t;return l>=e.length?0:l}}function Ke(s){const i=ne();return a.createElement(Ye,Object.assign({},s,{i18n:i}))}var O={Select:"Polaris-Select",disabled:"Polaris-Select--disabled",error:"Polaris-Select--error",Backdrop:"Polaris-Select__Backdrop",Input:"Polaris-Select__Input",Content:"Polaris-Select__Content",InlineLabel:"Polaris-Select__InlineLabel",Icon:"Polaris-Select__Icon",SelectedOption:"Polaris-Select__SelectedOption",Prefix:"Polaris-Select__Prefix",hover:"Polaris-Select--hover",toneMagic:"Polaris-Select--toneMagic"};const ue="";function Qe({options:s,label:i,labelAction:t,labelHidden:e,labelInline:l,disabled:n,helpText:o,placeholder:c,id:r,name:u,value:m=ue,error:f,onChange:p,onFocus:h,onBlur:C,requiredIndicator:v,tone:y}){const{value:x,toggle:F}=Ee(!1),P=S.useId(),E=r??P,j=l?!0:e,L=M(O.Select,f&&O.error,y&&O[be("tone",y)],n&&O.disabled),_=S.useCallback(w=>{F(),h==null||h(w)},[h,F]),k=S.useCallback(w=>{F(),C==null||C(w)},[C,F]),I=p?w=>p(w.currentTarget.value,E):void 0,N=[];o&&N.push(Pe(E)),f&&N.push(`${E}Error`);let b=(s||[]).map(Je);c&&(b=[{label:c,value:ue,disabled:!0},...b]);const V=l&&a.createElement(De,{paddingInlineEnd:"100"},a.createElement(se,{as:"span",tone:y&&y==="magic"&&!x?"magic-subdued":"subdued",truncate:!0},i)),W=Xe(b,m),B=W.prefix&&a.createElement("div",{className:O.Prefix},W.prefix),z=a.createElement("div",{className:O.Content,"aria-hidden":!0,"aria-disabled":n},V,B,a.createElement("span",{className:O.SelectedOption},W.label),a.createElement("span",{className:O.Icon},a.createElement(pe,{source:_e}))),U=b.map(et);return a.createElement(ke,{id:E,label:i,error:f,action:t,labelHidden:j,helpText:o,requiredIndicator:v,disabled:n},a.createElement("div",{className:L},a.createElement("select",{id:E,name:u,value:m,className:O.Input,disabled:n,onFocus:_,onBlur:k,onChange:I,"aria-invalid":!!f,"aria-describedby":N.length?N.join(" "):void 0,"aria-required":v},U),z,a.createElement("div",{className:O.Backdrop})))}function he(s){return typeof s=="string"}function ae(s){return typeof s=="object"&&"options"in s&&s.options!=null}function me(s){return{label:s,value:s}}function Je(s){if(he(s))return me(s);if(ae(s)){const{title:i,options:t}=s;return{title:i,options:t.map(e=>he(e)?me(e):e)}}return s}function Xe(s,i){const t=Ge(s);let e=t.find(l=>i===l.value);return e===void 0&&(e=t.find(l=>!l.hidden)),e||{value:"",label:""}}function Ge(s){let i=[];return s.forEach(t=>{ae(t)?i=i.concat(t.options):i.push(t)}),i}function fe(s){const{value:i,label:t,prefix:e,key:l,...n}=s;return a.createElement("option",Object.assign({key:l??i,value:i},n),t)}function et(s){if(ae(s)){const{title:i,options:t}=s;return a.createElement("optgroup",{label:i,key:i},t.map(fe))}return fe(s)}const tt=({orders:s,delivery_method:i,onSuccessfulDelivery:t})=>{const[e,l]=S.useState([]),[n,o]=S.useState(!1),[c,r]=S.useState(!1),[u,m]=S.useState(""),[f,p]=S.useState(""),[h,C]=S.useState(""),v=S.useCallback(()=>r(!c),[c]),y=S.useCallback(()=>r(!c),[c]),x=S.useCallback(()=>alert("Scrolled to bottom"),[]),F=d.jsx(le,{onClick:y,disabled:s.length==0||i,variant:"primary",children:"Process Delivery"}),P=async()=>{try{o(!0),await Le.post("/fetch-deliveries",{orders:s,delivery_company:i}).then(E=>{o(!1),console.log("Response:",E.data)})}catch(E){o(!1),console.error("Error posting orders:",E)}};return S.useEffect(()=>{const E=s.map(_=>[_.id,_.customer_name,_.customer_phone,_.item_title,`${_.total_price}`,_.delivery_method_ar,_.city,_.province]),j=s.length,L=s.reduce((_,k)=>_+parseFloat(k.total_price),0).toFixed(2);l(E),p(j+(j!=1?" Items":" Item")),m(L+" DA")},[s]),d.jsxs(d.Fragment,{children:[d.jsx(re,{activator:F,open:c,title:"Scrollable content",onClose:y,onScrolledToBottom:x,noScroll:!0,primaryAction:{content:"Deliver with "+i.label,onAction:P,loading:n},secondaryActions:[{content:"Cancel",onAction:v}],children:d.jsx(re.Section,{children:d.jsx(Ke,{columnContentTypes:["text","text","text","text","numeric","text","text","text"],headings:["Order","Customer","Phone","Item","Total Price","Delivery method","Address","Wilaya"],rows:e,totals:["","","",f,u,"","","",""],showTotalsInFooter:!0,hideScrollIndicator:!0,hoverable:!0,stickyHeader:!0,fixedFirstColumns:!0})})}),h&&d.jsx(We,{content:h,onDismiss:()=>{C("")}})]})},lt=({isShown:s=!0,onPress:i,placeholder:t})=>{const[e,l]=S.useState(s);return d.jsx("div",{children:e&&d.jsx(Fe,{title:"API Key Missing",tone:"warning",onDismiss:()=>l(!1),children:d.jsx("p",{onClick:i,style:{cursor:"pointer",textDecoration:"underline"},children:t})})})},ot=({goToSettings:s})=>{const[i,t]=S.useState([]),[e,l]=S.useState(!0),{axios:n}=we(),[o,c]=S.useState([]),[r,u]=S.useState(null),[m,f]=S.useState(null),{selectedResources:p,allResourcesSelected:h,handleSelectionChange:C,clearSelection:v}=Be(i),y=()=>{t([]),c([]),l(!0),v(),x(r)},x=(R=null)=>{n.get("/get-not-fulfilled-orders",{params:{page_info:R}}).then(b=>{console.log(b.data.orders),u(b.data.next_page),f(b.data.previous_page),t(E(b.data.orders)),l(!1),c(b.data.deliveries)}).catch(b=>{l(!1)})},F=()=>{t([]),l(!0),v(),x(r)},P=()=>{t([]),l(!0),v(),x(m)},E=R=>R.map(b=>{try{return{id:b.id,order:`#${b.order}`,created_at:`${b.created_at}`,customer_name:`${b.customer.name}`,customer_phone:`${b.customer.phone}`,paymentStatus:`${b.paymentStatus}`,total_price:`${b.total_price}`,subtotal_price:`${b.subtotal_price}`,shipping_price:`${b.shipping_price}`,fulfillment_status:`${b.fulfillment_status}`,delivery_method:`${b.delivery_method}`,delivery_method_ar:`${b.delivery_method_ar.length===0?null:b.delivery_method_ar[0].title}`,item_title:`${b.item.title}`,variant_title:`${b.item.variant_title}`,quantity:`${b.item.quantity}`,province:`${b.shipping_address.province}`,city:`${b.shipping_address.city}`,is_delivered:b.fulfillment_status?d.jsx(Y,{progress:"complete",tone:"success",children:"Yes"}):d.jsx(Y,{progress:"incomplete",children:"No"}),all:`${b}`}}catch(V){return console.log("Error in processing order ID:",b.id,"Error details:",V),{error:!0,message:"Error processing order",orderId:b.id}}});S.useEffect(()=>{x(r)},[]);const j={singular:"order",plural:"orders"},L=()=>i.filter(R=>p.includes(R.id)),_=i.map(({id:R,order:b,created_at:V,customer_name:W,customer_phone:B,paymentStatus:z,total_price:U,subtotal_price:w,shipping_price:Z,fulfillment_status:K,delivery_method:G,delivery_method_ar:A,item_title:$,variant_title:T,quantity:D,province:Q,city:J,is_delivered:ee},ge)=>d.jsxs(H.Row,{id:R,selected:p.includes(R),position:ge,children:[d.jsx(H.Cell,{children:d.jsx(se,{variant:"bodyMd",fontWeight:"bold",as:"span",children:b})}),d.jsx(H.Cell,{children:V}),d.jsx(H.Cell,{children:W}),d.jsx(H.Cell,{children:B}),d.jsx(H.Cell,{children:z}),d.jsx(H.Cell,{children:U}),d.jsx(H.Cell,{children:w}),d.jsx(H.Cell,{children:Z}),d.jsx(H.Cell,{children:K}),d.jsx(H.Cell,{children:A==="التوصيل للمكتب"?d.jsx(Y,{tone:"info-strong",children:A}):A==="التوصيل للمنزل"?d.jsx(Y,{tone:"attention-strong",children:A}):d.jsx(Y,{tone:"critical-strong",children:A})}),d.jsx(H.Cell,{children:d.jsx(se,{as:"span",alignment:"start",numeric:!0,children:$})}),d.jsx(H.Cell,{children:T}),d.jsx(H.Cell,{children:D}),d.jsx(H.Cell,{children:d.jsx(Y,{tone:"info-strong",children:Q})}),d.jsx(H.Cell,{children:J}),d.jsx(H.Cell,{children:ee})]},R)),[k,I]=S.useState({label:"ZR Express",value:"zr_express"}),N=S.useCallback((R,b)=>I({value:R,label:b}),[]);return d.jsxs(d.Fragment,{children:[e&&d.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center"},children:d.jsx(Re,{accessibilityLabel:"Spinner example",size:"large"})}),d.jsx("div",{hidden:e,children:d.jsxs(He,{children:[d.jsx(lt,{onPress:s,placeholder:"Please Enter zr-express api Token"}),d.jsx($e,{children:d.jsxs(Ie,{gap:"loose",children:[d.jsx(Qe,{label:"Deliver with: ",labelInline:!0,options:o,onChange:N,value:k.value}),d.jsx(tt,{orders:L(),delivery_method:k,onSuccessfulDelivery:y}),o.length===0&&d.jsx("p",{onClick:s,style:{cursor:"pointer",textDecoration:"underline"},children:"Please Enter zr-express api Token"})]})}),d.jsx(je,{children:d.jsx(H,{condensed:Ne().smDown,resourceName:j,itemCount:i.length,selectedItemsCount:h?"All":p.length,onSelectionChange:C,headings:[{title:"Order"},{title:"Date ?"},{title:"Customer"},{title:"Phone"},{title:"Payment status"},{title:"Total price"},{title:"Price item"},{title:"Shipping"},{title:"Fulfill status"},{title:"Delivery"},{title:"Item",alignment:"start"},{title:"Variant"},{title:"Quantity"},{title:"Wilaya"},{title:"Location"},{title:"is Delivered"}],pagination:{hasPrevious:m!=null,hasNext:r!=null,onNext:F,onPrevious:P},children:_})})]})})]})};export{ot as default};
