import{R as C,a0 as I,c as M,a1 as z,r as t,j as e,S as Z,a2 as L,T as w,a3 as A,F as K,a4 as f,d as _}from"./index-RABUB5AY.js";import{u as W}from"./useAxios-0bCRz5Bo.js";import{C as q}from"./Card-wUD3hrfQ.js";import{T as G}from"./Toast-6Umqpg9O.js";var j={Link:"Polaris-Link",monochrome:"Polaris-Link--monochrome",removeUnderline:"Polaris-Link--removeUnderline"};function H({url:l,children:r,onClick:i,external:x,target:c,id:d,monochrome:h,removeUnderline:k,accessibilityLabel:g,dataPrimaryLink:o}){return C.createElement(I.Consumer,null,p=>{const m=h||p,u=M(j.Link,m&&j.monochrome,k&&j.removeUnderline);return l?C.createElement(z,{onClick:i,className:u,url:l,external:x,target:c,id:d,"aria-label":g,"data-primary-link":o},r):C.createElement("button",{type:"button",onClick:i,className:u,id:d,"aria-label":g,"data-primary-link":o},r)})}const X=()=>{const{axios:l}=W(),[r,i]=t.useState(!0),[x,c]=t.useState(!1),[d,h]=t.useState(""),[k,g]=t.useState(""),[o,p]=t.useState(""),[m,u]=t.useState(""),[b,v]=t.useState(""),[F,D]=t.useState(""),[N,R]=t.useState(""),[n,y]=t.useState(!1),P=t.useCallback(()=>{y(!1),c(!0),l.post("/update-settings",{platform:k,token_1:o,token_2:m,phone_number:b}).then(s=>{console.log(s.data),c(!1),h("Token Updated Successfully")}).catch(s=>{c(!1)})},[o,m,b]),U=t.useCallback(()=>{y(!0)},[]),S=t.useCallback(s=>{p(s);const a=E(s);D(a)},[]),T=t.useCallback(s=>{u(s);const a=E(s);R(a)},[]),E=s=>{const B=s.length>6?s.length-6:0;return s.substring(0,3)+"*".repeat(B)+s.slice(-3)};return t.useEffect(()=>{l.get("/get-settings").then(s=>{console.log(s.data);const a=s.data.deliveryCredential;p(a.token_1),u(a.token_2),v(a.phone_number),S(a.token_1),T(a.token_2),i(!1)}).catch(s=>{i(!1)})},[]),e.jsxs(e.Fragment,{children:[r&&e.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center"},children:e.jsx(Z,{accessibilityLabel:"Spinner example",size:"large"})}),e.jsx("div",{hidden:r,children:e.jsx(L,{children:e.jsxs(L.Section,{children:[e.jsx("div",{style:{marginLeft:15},children:e.jsx(w,{variant:"headingLg",as:"p",children:"ZR Express"})}),e.jsx(q,{sectioned:!0,children:e.jsx(A,{onSubmit:P,children:e.jsxs(K,{children:[e.jsxs("div",{style:{display:"flex",flexDirection:"row",gap:10},children:[e.jsx("p",{children:"To find these Credentials, go to"}),e.jsx(H,{url:"https://zrexpress.com/ZR_WEB/FR/Developpement.awp",target:"_blank",children:"ZR Express Dev Dashboard"})]}),e.jsx(f,{label:"Token",value:n?o:F,onChange:S,disabled:!n,autoComplete:"off"}),e.jsx(f,{label:"Key",value:n?m:N,onChange:T,disabled:!n,autoComplete:"off"}),e.jsx(f,{label:"Phone Number",value:b,onChange:s=>v(s),disabled:!n,autoComplete:"off"}),e.jsxs(e.Fragment,{children:[e.jsx(_,{submit:!0,variant:"primary",tone:"critical",disabled:!n,loading:x,children:"Save"}),e.jsx(_,{onClick:U,disabled:n,children:"Edit"})]})]})})})]})})}),d&&e.jsx(G,{content:d,onDismiss:()=>{h("")}})]})};export{X as default};
